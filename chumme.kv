#: kivy 1.9.1
#: import ListAdapter kivy.adapters.listadapter.ListAdapter
#: import FriendItemButton gui.FriendItemButton
#: include popup.kv

ChumMeRoot:

<ChumMeRoot>:
    friend_list_view: friend_list_view
    FriendList:
        id: friend_list_view


<FriendItemButton>:
    text: self.friend.full_name
    height: '40dp'
    size_hint_y: None
    on_press: app.root.show_friend_details(self.friend)


<FriendList>:
    orientation: 'vertical'
    friend_list: friend_list_view
    no_friends_label: no_friends_label
    Button:
        height: '45dp'
        size_hint_y: None
        text: 'Add Friend'
        on_press: app.root.show_add_update_friend_form('add')
    Label:
        id: no_friends_label
    ListView:
        id: friend_list_view
        adapter:
            ListAdapter(
            data=[],
            cls=FriendItemButton,
            args_converter=root.args_converter)


<AddFriendFormInput@BoxLayout>
    height: '30dp'
    size_hint_y: None


<AddFriendForm>:
    orientation: 'vertical'
    first_name: first_name
    middle_name: middle_name
    last_name: last_name
    birthdate: birthdate
    email: email
    cell_phone: cell_phone
    AddFriendFormInput:
        Label:
            text: 'First Name'
        TextInput:
            id: first_name
            text: '' if root.friend is None else root.friend.first_name
    AddFriendFormInput:
        Label:
            text: 'Middle Name'
        TextInput:
            id: middle_name
            text: '' if root.friend is None else root.friend.middle_name
    AddFriendFormInput:
        Label:
            text: 'Last Name'
        TextInput:
            id: last_name
            text: '' if root.friend is None else root.friend.last_name
    AddFriendFormInput:
        Label:
            text: 'Birthdate'
        TextInput:
            id: birthdate
            text: '' if root.friend is None else root.friend.birthdate
    AddFriendFormInput:
        Label:
            text: 'Email'
        TextInput:
            id: email
            text: '' if root.friend is None else root.friend.email
    AddFriendFormInput:
        Label:
            text: 'Cell Phone'
        TextInput:
            id: cell_phone
            text: '' if root.friend is None else root.friend.cell_phone
    BoxLayout:
    BoxLayout:
        height: '40dp'
        size_hint_y: None
        Button:
            text: 'Cancel'
            on_press: app.root.show_friend_list()
        Button:
            text: '{} friend'.format(root.action)
            on_press:
                app.root.add_update_friend(root.action,
                0 if root.friend is None else root.friend.id)


<FriendInfoView>:
    orientation: 'vertical'
    Label:
        text: root.full_name
        size_hint_y: None
        height: '40dp'
    BoxLayout:
        size_hint_y: None
        height: '40dp'
        Button:
            text: 'Update'
            on_press:
                app.root.show_add_update_friend_form('update', root.friend)
        Button:
            text: 'Delete'
            on_press: root.delete_friend()
    BoxLayout:
        GridLayout:
            cols: 2
            orientation: 'vertical'
            Label:
                text: 'First Name'
            Label:
                text: root.first_name
            Label:
                text: 'Middle Name'
            Label:
                text: root.middle_name
            Label:
                text: 'Last Name'
            Label:
                text: root.last_name
            Label:
                text: 'Birthdate'
            Label:
                text: root.birthdate
            Label:
                text: 'Email'
            Label:
                text: root.email
            Label:
                text: 'Cell Phone'
            Label:
                text: root.cell_phone
        BoxLayout:
            orientation: 'vertical'
            AnchorLayout:
                Image:
                    anchor_x: 'center'
                    anchor_y: 'center'
                    size_hint: (0.75, 0.75)
                    source: 'chumme_profile.png'
            Label:
                text: 'Social Networks'
    Button:
        text: 'Show friends'
        size_hint_y: None
        height: '40dp'
        on_press: app.root.show_friend_list()
